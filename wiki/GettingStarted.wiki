#summary How to get started with installing and understanding the software

= Introduction =

The code for Perl App Engine is completely in its formative stages (pre-alpha)
and changing quickly.  We are trying to keep documentation up to date. Please
let us know if you find an error or discrepancy.

  * [Background]
  * SoftwareExecutionFlow

= Status of this Documentation =

  * 2009-06-20 spadkins - I executed these instructions on my Ubuntu Linux laptop, and they worked up until the "python_sdk_partial/dev_appserver.py apiproxy_python" command

   ERROR:root:Application configuration file not found in apiproxy_python

= Installing Required Perl Modules from CPAN =

Here's how to get started.
I had to install the following modules and their dependencies on my system.
(You may have to install more.)

IMPORTANT: When you install Moose (below) and follow the dependencies, you will
be prompted to install Class::C3::XS. This is the one default you should
*not* choose (i.e. choose "No").  If you miss this, you will need to
uninstall it later.

{{{
   su -   # become root
   perl -MCPAN -e shell
   cpan> install IPC::Run
   cpan> install HTTP::Server::Simple::CGI
   cpan> install Net::Server::Fork
   cpan> install namespace::clean
   cpan> install Moose
   cpan> install Moose::Policy
   cpan> exit
   exit   # become a normal user again

NOTE: Before you install Moose (above), you might want to install the following modules.
      Some will be drawn in automatically my installing Moose.
      Others are useful in the Moose tests.

   install DateTime
   install DateTime::Calendar::Mayan
   install Regexp::Common
   install Locale::US
   install HTTP::Headers
   install Params::Coerce
   install URI
   install File::Temp
   install Test::Tester
   install Test::Output
   install IO::String
   install IO::File
   install Module::Refresh
   install Test::Deep
   install DBM::Deep
   install Declare::Constraints::Simple
   install Class::MOP

}}}

If you did install the module called Class::C3::XS,
it needs to be uninstalled. I did the following to get rid
of it. You may have to adjust your paths appropriately.

NOTE: As of 2009-06-20, I didn't have to do the following any more because Class::C3::XS had not been installed.

{{{
   su -   # become root
   rm /usr/lib/perl5/site_perl/5.8.8/i686-linux/Class/C3/XS.pm
   rm /usr/lib/perl5/site_perl/5.8.8/i686-linux/auto/Class/C3/XS/XS.bs
   rm /usr/lib/perl5/site_perl/5.8.8/i686-linux/auto/Class/C3/XS/XS.so
   rm /usr/share/man/man3/Class::C3::XS.3pm
   rm /usr/lib/perl5/site_perl/5.8.8/i686-linux/auto/Class/C3/XS/.packlist
   exit   # become a normal user again
}}}

Note: draegtun has suggested that setting the CLASS_MOP_NO_XS environment variable
would make the uninstall of Class::C3::XS unnecessary. I (spadkins) tried this
and was unable to make that work.

= Ensure Python is Installed and Up-to-Date =

The Perl App Engine development server builds on the Google App Engine development
kit written in Python. It proxies all Google-specific API's to the Python development
server.  Therefore, Python must be installed on your system and it must be at least
Python 2.5.  If you see this message, you need to upgrade Python.

{{{
   cd $HOME/src/perl-appengine/
   ./python_sdk_partial/dev_appserver.py apiproxy_python
   Error: Python 2.3 is not supported. Please use version 2.5 or greater.
   python -v
}}}

= Installing perl-appengine Software =

Then you check out the existing projects.
(I am assuming you will do this in a HOME directory on a Linux system.)

{{{
   cd $HOME/src
   svn checkout http://sys-protect.googlecode.com/svn/trunk/     sys-protect
   svn checkout http://protobuf-perl.googlecode.com/svn/trunk/   protobuf-perl
   svn checkout http://perl-appengine.googlecode.com/svn/trunk/  perl-appengine
}}}

Then do the initial compilation. (Do this once.)
Note: These do not need to be installed via "make install" as the
perl-appengine dev kit includes relative paths to the appropriate directories.

{{{
   cd $HOME/src/sys-protect
   perl Makefile.PL
   make
}}}

Then do the following to update and compile. (Do this regularly to
keep up to date.)

{{{
   cd $HOME/src/sys-protect
   svn update
   perl Makefile.PL
   make

   cd $HOME/src/protobuf-perl
   svn update

   cd $HOME/src/perl-appengine
   svn update
}}}

= Running the Development Server =

The code currently checked in to the perl-appengine subversion repository is
targeted to be the development kit.

First you have to fire up the Python version of the development server 
running an API proxy application.  In a first terminal window,
type the following.

{{{
   cd $HOME/src/perl-appengine
   python_sdk_partial/dev_appserver.py apiproxy_python
}}}

To run one of the demos, choose a demo such as "demos/guestbook".
Then in a second terminal window, type the following.

{{{
   cd $HOME/src/perl-appengine
   dev_appserver.pl demos/guestbook
}}}

The server output is something like the following.

{{{
 2008/07/28-22:52:38 AppEngine::Server::NetServer0 (type Net::Server::Fork) starting! pid(14736)
 Binding to TCP port 9000 on host *
 Group Not Defined.  Defaulting to EGID '205 3000 217 10 205'
 User Not Defined.  Defaulting to EUID '102'
}}}

Then in a third terminal window, go to lynx to access the test page.

{{{
   lynx localhost:9000
}}}